# 权限管理

## 登录篇

 this.$message.error(err); //登录失败提示错误

全局钩子router.beforeEach拦截路由-->1 判断是否有token---有即登录了--->2 判断是否有用户信息---有

>如果是做了单点登录得功能的话，用户信息存储在本地也是可以的。当你一台电脑登录时，另一台会被下线，所以总会重新登录获取最新的内容

## 权限篇

前端会有一份路由表

带着token发请求-->获取用户角色-->计算有权限的路由-->router.addRoutes 动态挂载这些路由

具体实现

1. 创建vue实例的时候将vue-router挂载，但这个时候vue-router挂载一些登录或公用的页面。
2. 当用户登录后，获取用role，将role和路由表每个页面的需要的权限作比较，生成最终用户可访问的路由表。
3. 调用router.addRoutes(store.getters.addRouters)添加用户可访问的路由。
4. 使用vuex管理路由表，
5. 根据vuex中可访问的路由渲染侧边栏组件。
